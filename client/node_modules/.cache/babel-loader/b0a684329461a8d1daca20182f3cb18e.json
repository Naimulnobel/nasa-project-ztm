{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n/**\n * Load a provided image by URL.\n * @param  {String} url\n * @return {Promise}\n */\n\n\nvar loadImage = exports.loadImage = function loadImage(url) {\n  return new Promise(function (resolve, reject) {\n    var img = new Image();\n\n    img.onload = function () {\n      return resolve();\n    };\n\n    img.onerror = img.onabort = function () {\n      return reject();\n    };\n\n    img.src = url;\n  });\n};\n/**\n * Load a provided sound by URL.\n * @param  {String} url\n * @return {Promise}\n */\n\n\nvar loadSound = exports.loadSound = function loadSound(url) {\n  return new Promise(function (resolve, reject) {\n    var sound = new Audio();\n    sound.addEventListener('canplaythrough', function () {\n      return resolve();\n    });\n\n    sound.onerror = sound.onabort = function () {\n      return reject();\n    };\n\n    sound.src = url;\n  });\n};\n/**\n * Create handler for loader functionalities.\n * @param  {Object} depencencies\n * @param  {Function} depencencies.loadImage\n * @param  {Function} depencencies.loadSound\n * @return {Object}\n */\n\n\nexports.default = function (depencencies) {\n  var deps = _extends({\n    loadImage: loadImage,\n    loadSound: loadSound\n  }, depencencies);\n\n  return {\n    /**\n     * Load a list of image and audio resources.\n     * @param  {Object} resources\n     * @param  {String[]} resources.images\n     * @param  {String[]} resources.sounds\n     * @param  {Object} opts - Optional options.\n     * @param  {Number} [opts.timeout=30000] - Maximum duration to load. If this time\n     * is reached and resources are not loaded, the promise is rejected.\n     * @return {Promise}\n     */\n    load: function load(resources, opts) {\n      var _ref = resources || {},\n          _ref$images = _ref.images,\n          images = _ref$images === undefined ? [] : _ref$images,\n          _ref$sounds = _ref.sounds,\n          sounds = _ref$sounds === undefined ? [] : _ref$sounds;\n\n      var options = Object.assign({\n        timeout: 30000\n      }, opts);\n      return new Promise(function (resolve, reject) {\n        setTimeout(reject, options.timeout);\n        Promise.all([].concat(_toConsumableArray(images.map(function (image) {\n          return deps.loadImage(image);\n        })), _toConsumableArray(sounds.map(function (sound) {\n          return deps.loadSound(sound);\n        })))).then(resolve, reject);\n      });\n    }\n  };\n};","map":{"version":3,"sources":["/home/nobel/Documents/nasa-project/client/node_modules/arwes/lib/tools/createLoader/index.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_toConsumableArray","arr","Array","isArray","arr2","from","loadImage","url","Promise","resolve","reject","img","Image","onload","onerror","onabort","src","loadSound","sound","Audio","addEventListener","default","depencencies","deps","load","resources","opts","_ref","_ref$images","images","undefined","_ref$sounds","sounds","options","timeout","setTimeout","all","concat","map","image","then"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n/**\n * Load a provided image by URL.\n * @param  {String} url\n * @return {Promise}\n */\nvar loadImage = exports.loadImage = function loadImage(url) {\n  return new Promise(function (resolve, reject) {\n    var img = new Image();\n    img.onload = function () {\n      return resolve();\n    };\n    img.onerror = img.onabort = function () {\n      return reject();\n    };\n    img.src = url;\n  });\n};\n\n/**\n * Load a provided sound by URL.\n * @param  {String} url\n * @return {Promise}\n */\nvar loadSound = exports.loadSound = function loadSound(url) {\n  return new Promise(function (resolve, reject) {\n    var sound = new Audio();\n    sound.addEventListener('canplaythrough', function () {\n      return resolve();\n    });\n    sound.onerror = sound.onabort = function () {\n      return reject();\n    };\n    sound.src = url;\n  });\n};\n\n/**\n * Create handler for loader functionalities.\n * @param  {Object} depencencies\n * @param  {Function} depencencies.loadImage\n * @param  {Function} depencencies.loadSound\n * @return {Object}\n */\n\nexports.default = function (depencencies) {\n  var deps = _extends({\n    loadImage: loadImage,\n    loadSound: loadSound\n  }, depencencies);\n  return {\n\n    /**\n     * Load a list of image and audio resources.\n     * @param  {Object} resources\n     * @param  {String[]} resources.images\n     * @param  {String[]} resources.sounds\n     * @param  {Object} opts - Optional options.\n     * @param  {Number} [opts.timeout=30000] - Maximum duration to load. If this time\n     * is reached and resources are not loaded, the promise is rejected.\n     * @return {Promise}\n     */\n    load: function load(resources, opts) {\n      var _ref = resources || {},\n          _ref$images = _ref.images,\n          images = _ref$images === undefined ? [] : _ref$images,\n          _ref$sounds = _ref.sounds,\n          sounds = _ref$sounds === undefined ? [] : _ref$sounds;\n\n      var options = Object.assign({\n        timeout: 30000\n      }, opts);\n\n      return new Promise(function (resolve, reject) {\n        setTimeout(reject, options.timeout);\n        Promise.all([].concat(_toConsumableArray(images.map(function (image) {\n          return deps.loadImage(image);\n        })), _toConsumableArray(sounds.map(function (sound) {\n          return deps.loadSound(sound);\n        })))).then(resolve, reject);\n      });\n    }\n  };\n};"]},"metadata":{},"sourceType":"script"}